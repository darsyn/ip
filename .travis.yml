language: php
php:
    - '7.0'
    - '7.1'
    - '7.2'
    - '7.3'
    - '7.4'
    - '8.0'

install:
    - composer install
script:
    - find src/ -type f -name '*.php' -print0 | xargs -0 -n1 -P4 php -l -n | (! grep -v "No syntax errors detected" )
    - "php -r 'exit(version_compare(PHP_VERSION, \"7.1.0\", \">=\") ? 0 : 1);' && ./vendor/bin/phpunit --bootstrap='vendor/autoload.php' tests"

os: linux
dist: xenial
